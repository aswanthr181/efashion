<%- include('../layouts/header.ejs'); -%>
<style>
	body {
		background: #f7f7ff;
		margin-top: 20px;
	}

	.card {
		position: relative;
		display: flex;
		flex-direction: column;
		min-width: 0;
		word-wrap: break-word;
		background-color: #fff;
		background-clip: border-box;
		border: 0 solid transparent;
		border-radius: .25rem;
		margin-bottom: 1.5rem;
		box-shadow: 0 2px 6px 0 rgb(218 218 253 / 65%), 0 2px 6px 0 rgb(206 206 238 / 54%);
	}

	.me-2 {
		margin-right: .5rem !important;
	}
</style>

<div class="container">
	<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
	
	</div>
  </div>
  <div class="container">
	<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
	
	</div>
  </div>
<div class="container">
    <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
    
    </div>
</div>
<div class="container">
	<div class="main-body">
	  <div class="row gutters-sm">
		<div class="col-md-4 mb-3">
		  <div class="card">
			<div class="card-body">
			  <div class="d-flex flex-column align-items-center text-center">
				<img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin"
				  class="rounded-circle" width="150">
				<div class="mt-3">
				  <h4><%=user.name%></h4>
				</div>
			  </div>
			</div>
		  </div>
		</div>
		<div class="col-lg-8">
		  <div class="card">
			<div class="card-body">
			  <form action="/editProfileDetails" method="post" onsubmit="return validateForm()">
				<div class="row mb-3">
				  <div class="col-sm-3">
					<h6 class="mb-0">Full Name</h6>
				  </div>
				  <div class="col-sm-9 text-secondary">
					<input type="text" class="form-control" name="name" value=<%=user.name%> >
					<span id="name-error" class="error text-danger"></span>
				  </div>
				</div>
				<div class="row mb-3">
				  <div class="col-sm-3">
					<h6 class="mb-0">Email</h6>
				  </div>
				  <div class="col-sm-9 text-secondary">
					<input type="email" class="form-control" name="email" value=<%=user.email%> >
					<span id="email-error" class="error text-danger"></span>
				  </div>
				</div>
				<div class="row mb-3">
				  <div class="col-sm-3">
					<h6 class="mb-0">Mobile</h6>
				  </div>
				  <div class="col-sm-9 text-secondary">
					<input type="tel" name="mobile" class="form-control" pattern="[0-9]{10}" value=<%=user.mobile%> >
					<span id="mobile-error" class="error text-danger"></span>
				  </div>
				</div>
				<div class="col-sm-9 text-secondary">
				  <input type="hidden" name="userId" class="form-control" value=<%=user._id%>>
				</div>
				<div class="row">
				  <div class="col-sm-3"></div>
				  <div class="col-sm-9 text-secondary">
					<button class="btn btn-primary px-4" type="submit"> Save Changes</button>
				  </div>
				</div>
			  </form>
			</div>
		  </div>
		</div>
	  </div>
	</div>
  </div>
<%- include('../layouts/footer.ejs'); -%>

<script>
function validateForm() {
	// Get the input fields
	var nameField = document.getElementsByName('name')[0];
	var emailField = document.getElementsByName('email')[0];
	var mobileField = document.getElementsByName('mobile')[0];
  
	// Check if any field contains only spaces
	if (nameField.value.trim() === '') {
	  document.getElementById('name-error').textContent = 'Please enter your name';
	  return false;
	}
  
	if (emailField.value.trim() === '') {
	  document.getElementById('email-error').textContent = 'Please enter your email';
	  return false;
	}
  
	if (mobileField.value.trim() === '') {
	  document.getElementById('mobile-error').textContent = 'Please enter your mobile number';
	  return false;
	}
  
	// All fields are valid
	return true;
  }
</script>
  